/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ({

/***/ "./node_modules/_point-in-polygon@1.0.1@point-in-polygon/index.js":
/*!************************************************************************!*\
  !*** ./node_modules/_point-in-polygon@1.0.1@point-in-polygon/index.js ***!
  \************************************************************************/
/*! no static exports found */
/***/ (function(module, exports) {

eval("module.exports = function (point, vs) {\n    // ray-casting algorithm based on\n    // http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html\n    \n    var x = point[0], y = point[1];\n    \n    var inside = false;\n    for (var i = 0, j = vs.length - 1; i < vs.length; j = i++) {\n        var xi = vs[i][0], yi = vs[i][1];\n        var xj = vs[j][0], yj = vs[j][1];\n        \n        var intersect = ((yi > y) != (yj > y))\n            && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);\n        if (intersect) inside = !inside;\n    }\n    \n    return inside;\n};\n\n\n//# sourceURL=webpack:///./node_modules/_point-in-polygon@1.0.1@point-in-polygon/index.js?");

/***/ }),

/***/ "./src/CollideManage.js":
/*!******************************!*\
  !*** ./src/CollideManage.js ***!
  \******************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return CollideManage; });\n/* harmony import */ var _Constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Constants */ \"./src/Constants.js\");\n\r\n\r\nclass CollideManage {\r\n    constructor(model) {\r\n        this.model = model;\r\n    }\r\n\r\n    /**\r\n     * 检测点是否在节点上\r\n     */\r\n    checkPointInGroup(arrPoint) {\r\n        const list = this.model.get(_Constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].groupList, []);\r\n\r\n        for(let len = list.length, i = len - 1; i >= 0; --i) {\r\n            const it = list[i];\r\n            if (it.pointIn(arrPoint)) {\r\n                return it;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * 检测点是否在编辑节点上\r\n     */\r\n    checkPointInEditGroup(arrPoint) {\r\n        const list = this.model.get(_Constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].groupEditList, []);\r\n\r\n        for(let len = list.length, i = len - 1; i >= 0; --i) {\r\n            const it = list[i];\r\n            if (it.pointIn(arrPoint)) {\r\n                return it;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * 检测点是否在锚点上\r\n     * @param {*} arrPoint \r\n     */\r\n    checkPointInAnchor(arrPoint) {\r\n        const list = this.model.get(_Constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].groupList, []);\r\n\r\n        for(let len = list.length, i = len - 1; i >= 0; --i) {\r\n            const it = list[i];\r\n            const index = it.pointInAnchor(arrPoint);\r\n            if (index >= 0) {\r\n                return {\r\n                    obj: it,\r\n                    index\r\n                };\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * 检测两个控制点是否可以连接，并返回连续颜色\r\n     * @param {*} startObj \r\n     * @param {*} endObj \r\n     */\r\n    checkAnchorsLink(startObj, endObj) {\r\n        const startType = startObj.obj.anchorPointTypes[startObj.index].type;\r\n        const endType = endObj.obj.anchorPointTypes[endObj.index].type;\r\n        if (startObj.obj !== endObj.obj && startType !== endType) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n}\n\n//# sourceURL=webpack:///./src/CollideManage.js?");

/***/ }),

/***/ "./src/Constants.js":
/*!**************************!*\
  !*** ./src/Constants.js ***!
  \**************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nconst eventTypePrefix = 'eventTypePrefix';\r\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\r\n    prefix: 'lzFlow',\r\n    groupNodes: 'groupNodes',\r\n    groupLines: 'groupLines',\r\n    groupList: 'groupList',\r\n    groupEditList: 'groupEditList',\r\n\r\n    groupType: {\r\n        node: 'groupType.node',\r\n        line: 'groupType.line'\r\n    },\r\n\r\n    eventTypePrefix: eventTypePrefix + '.',\r\n    eventTypeList: {\r\n        itemClick: eventTypePrefix + '.itemClick'\r\n    },\r\n\r\n    // 默认支持的图形类型\r\n    defautShape: {\r\n        rect: 'rect',\r\n        text: 'text',\r\n        polygon: 'polygon',\r\n        ellipse: 'ellipse'\r\n    },\r\n\r\n    // 组件模式\r\n    mode: {\r\n        // 展示模式\r\n        view: 'view',\r\n        // 编辑模式\r\n        edit: 'edit'\r\n    },\r\n\r\n    // 鼠标事件模式\r\n    eventMode: {\r\n        default: 'eventMode.default',\r\n        anchor: 'eventMode.anchor',\r\n        group: 'eventMode.group',\r\n        editGroup: 'eventMode.editGroup'\r\n    },\r\n\r\n    // 控制点连线类型\r\n    anchorStroke: {\r\n        // 默认\r\n        default: 'lightblue',\r\n        // 可以连接\r\n        yes: 'green',\r\n        // 不可以连接\r\n        no: 'red'\r\n    },\r\n\r\n    anchorType: {\r\n        // 入度\r\n        in: 'anchorType.in',\r\n        // 出度\r\n        out: 'anchorType.out'\r\n    },\r\n\r\n    // 实例\r\n    instance: {\r\n        // 节点管理器\r\n        groupManage: 'instance.groupManage',\r\n        // id管理器\r\n        idManage: 'instance.idManage',\r\n        // 坐标管理器\r\n        corrdManage: 'instance.corrdManage'\r\n    },\r\n\r\n    lineStroke: '#aab7c4'\r\n});\n\n//# sourceURL=webpack:///./src/Constants.js?");

/***/ }),

/***/ "./src/CoordManage.js":
/*!****************************!*\
  !*** ./src/CoordManage.js ***!
  \****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return CoordManage; });\n/* harmony import */ var _Point__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Point */ \"./src/Point.js\");\n\r\n\r\n\r\n/**\r\n * 坐标管理器\r\n */\r\nclass CoordManage {\r\n    constructor(model) {\r\n        this.model = model;\r\n        // 虚拟坐标起点\r\n        this.startPoint = _Point__WEBPACK_IMPORTED_MODULE_0__[\"default\"].create(0, 0);\r\n    }\r\n\r\n    /**\r\n     * 修改虚拟坐标起点\r\n     * @param {*} p \r\n     */\r\n    changeStartPoint(p) {\r\n        this.startPoint = p;\r\n    }\r\n\r\n    /**\r\n     * 将点坐标转换成画布上真实坐标\r\n     * @param {*} p \r\n     */\r\n    pointToCanvasCoord(p) {\r\n        return _Point__WEBPACK_IMPORTED_MODULE_0__[\"default\"].sub(p, this.startPoint);\r\n    }\r\n\r\n    /**\r\n     * 将点坐标转换成虚拟坐标\r\n     * @param {*} p \r\n     */\r\n    pointToVirtualCoord(p) {\r\n        return _Point__WEBPACK_IMPORTED_MODULE_0__[\"default\"].add(p, this.startPoint);\r\n    }\r\n\r\n    /**\r\n     * 将一组坐标转换成画布上真实坐标\r\n     * @param {Array} arr \r\n     */\r\n    pointsToCanvasCoord(arr) {\r\n        const result = [];\r\n        (arr || []).forEach(p => {\r\n            result.push(_Point__WEBPACK_IMPORTED_MODULE_0__[\"default\"].sub(p, this.startPoint));\r\n        });\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * 将一组坐标转换成虚拟坐标\r\n     * @param {Array} arr \r\n     */\r\n    pointsToVirtualCoord(p) {\r\n        const result = [];\r\n        (arr || []).forEach(p => {\r\n            result.push(_Point__WEBPACK_IMPORTED_MODULE_0__[\"default\"].add(p, this.startPoint));\r\n        })\r\n        return result;\r\n    }\r\n}\n\n//# sourceURL=webpack:///./src/CoordManage.js?");

/***/ }),

/***/ "./src/Draw.js":
/*!*********************!*\
  !*** ./src/Draw.js ***!
  \*********************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Draw; });\n/* harmony import */ var point_in_polygon__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! point-in-polygon */ \"./node_modules/_point-in-polygon@1.0.1@point-in-polygon/index.js\");\n/* harmony import */ var point_in_polygon__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(point_in_polygon__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Constants */ \"./src/Constants.js\");\n/* harmony import */ var _EventHandler__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./EventHandler */ \"./src/EventHandler.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils */ \"./src/utils/index.js\");\n/* harmony import */ var _engine_CanvasEngine__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./engine/CanvasEngine */ \"./src/engine/CanvasEngine.js\");\n/* harmony import */ var _CoordManage__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./CoordManage */ \"./src/CoordManage.js\");\n/* harmony import */ var _Point__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./Point */ \"./src/Point.js\");\n/* harmony import */ var _utils_line__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./utils/line */ \"./src/utils/line.js\");\n/*\r\n * Created on Tue May 01 2018\r\n *\r\n * Copyright (c) 2018 Your Company\r\n */\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass Draw {\r\n    constructor(container, model, height) {\r\n        this.container = container;\r\n        this.model = model;\r\n        this.mCoordManage = this.model.get(_Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].instance.corrdManage);\r\n        this.height = height;\r\n        this.initVars();\r\n        this.initDom();\r\n    }\r\n\r\n    /**\r\n     * 初始化变量\r\n     */\r\n    initVars() {\r\n        this.defautShape = [\r\n            _Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].defautShape.rect,\r\n            _Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].defautShape.text,\r\n            _Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].defautShape.polygon,\r\n            _Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].defautShape.ellipse\r\n        ];\r\n        this.startPoint = {\r\n            x: 0,\r\n            y: 0   \r\n        };\r\n    }\r\n\r\n    /**\r\n     * 初始化dom元素\r\n     */\r\n    initDom() {\r\n        const width = this.container.clientWidth;\r\n        const height = this.height || this.container.clientHeight;\r\n        this.containerSize = {\r\n            width,\r\n            height\r\n        }\r\n\r\n        const canvasContainer = document.createElement('div');\r\n        canvasContainer.style.position = 'relative';\r\n        this.container.appendChild(canvasContainer);\r\n        \r\n        // 显示面板\r\n        const showCanvas = document.createElement('canvas');\r\n        // 编辑面板\r\n        const editCanvas = document.createElement('canvas');\r\n\r\n        showCanvas.width = width;\r\n        showCanvas.height = height;\r\n        editCanvas.width = width;\r\n        editCanvas.height = height;\r\n        editCanvas.style.position = 'absolute';\r\n        editCanvas.style.top = '0px';\r\n        editCanvas.style.left = '0px';\r\n\r\n        canvasContainer.appendChild(showCanvas);\r\n        canvasContainer.appendChild(editCanvas);\r\n\r\n        // 设置绘画实例\r\n        const showCtx = showCanvas.getContext('2d');\r\n        const editCtx = editCanvas.getContext('2d');\r\n        this.showCtx = showCtx;\r\n        this.editCtx = editCtx;\r\n        this.showEngine = new _engine_CanvasEngine__WEBPACK_IMPORTED_MODULE_4__[\"default\"](showCtx);\r\n        this.editEngine = new _engine_CanvasEngine__WEBPACK_IMPORTED_MODULE_4__[\"default\"](editCtx);\r\n\r\n        // 画布尺寸\r\n        this.size = {\r\n            width,\r\n            height\r\n        };\r\n\r\n        // 事件系统\r\n        this.initEventHandler(canvasContainer);\r\n    }\r\n\r\n    /**\r\n     * 初始化事件系统\r\n     * @param {} container \r\n     */\r\n    initEventHandler(container) {\r\n        this.mEventHandler = new _EventHandler__WEBPACK_IMPORTED_MODULE_2__[\"default\"](container, this);\r\n    }\r\n\r\n    render() {\r\n        this.clearPanel();\r\n\r\n        const gm = this.model.get(_Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].instance.groupManage);\r\n        const groups = gm.getList();\r\n        const nodes = this.model.get(_Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].groupNodes) || {};\r\n\r\n        // 先绘制连线\r\n        groups.forEach(it => {\r\n            if (it.type !== _Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].groupType.line) {\r\n                return ;\r\n            }\r\n            const cfg = it.config;\r\n            const source = nodes[it.config.sourceId];\r\n            const target = nodes[it.config.targetId];\r\n            if (!source || !target) return;\r\n            const sourceIdx = cfg.sourceAnchor || 0;\r\n            const targetIdx = cfg.targetAnchor || 0;\r\n            const startPoint = source.anchorPoints[sourceIdx];\r\n            const endPoint = target.anchorPoints[targetIdx];\r\n            const points = Object(_utils_line__WEBPACK_IMPORTED_MODULE_7__[\"getLinkCtrlPoints\"])(startPoint, endPoint, source.size, target.size);\r\n            this.drawLinkLines(this.showEngine, points);\r\n            this.drawLinkArrow(this.showEngine, Object(_utils_line__WEBPACK_IMPORTED_MODULE_7__[\"getArrowPoints\"])(_utils__WEBPACK_IMPORTED_MODULE_3__[\"default\"].arrayPointsToPoint(points)));\r\n            // this.drawLinkValue(this.showEngine, points);\r\n        });\r\n\r\n        // 绘制节点\r\n        // groups.forEach(it => {\r\n        //     if (it.type === Constants.groupType.line) {\r\n        //         return ;\r\n        //     }\r\n        //     for(const key in it.list) {\r\n        //         const value = it.list[key];\r\n        //         if (this.defautShape.indexOf(key) > -1) {\r\n        //             this.drawDefaultShape(this.showEngine, key, value, it.config);\r\n        //         }\r\n        //     }\r\n        //     this.drawAnchorPoint(this.editEngine, it.anchorPoints);\r\n        // });\r\n\r\n        // this.renderDefaultEditItem();\r\n\r\n        this.renderActive();\r\n    }\r\n\r\n    /**\r\n     * 渲染激发状态下的节点\r\n     */\r\n    renderActive() {\r\n        this.clearPanel(this.editEngine);\r\n\r\n        const gm = this.model.get(_Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].instance.groupManage);\r\n        const groups = gm.getList();\r\n\r\n        // 绘制节点\r\n        groups.forEach(it => {\r\n            if (it.type === _Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].groupType.line) {\r\n                return ;\r\n            }\r\n\r\n            for(const key in it.list) {\r\n                const value = it.list[key];\r\n                if (this.defautShape.indexOf(key) > -1) {\r\n                    this.drawDefaultShape(this.showEngine, key, value, it.config);\r\n                }\r\n            }\r\n            this.drawAnchorPoint(this.editEngine, it.anchorPoints);\r\n\r\n            if (it.active) {\r\n                const obj = it.size;\r\n                this.drawRect(this.editEngine, obj.x, obj.y, obj.w, obj.h);\r\n            }\r\n        });\r\n\r\n        this.renderDefaultEditItem();\r\n    }\r\n\r\n    /**\r\n     * 绘制编辑模式下编辑内容\r\n     */\r\n    renderDefaultEditItem() {\r\n        const list = this.model.get(_Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].groupEditList, []);\r\n        list.forEach((it, idx) => {\r\n            for(const key in it.list) {\r\n                const value = it.list[key];\r\n                if (this.defautShape.indexOf(key) > -1) {\r\n                    const config = it.config;\r\n                    config.x = 50;\r\n                    config.y = idx * 60 + 30;\r\n                    it.setPosition(_Point__WEBPACK_IMPORTED_MODULE_6__[\"default\"].create(config.x, config.y));\r\n                    this.drawDefaultShape(this.editEngine, key, value, it.config, {x: 0, y:0});\r\n                }\r\n            }\r\n        });\r\n\r\n        this.drawLine(this.editEngine, {\r\n            x: 100,\r\n            y: 0,\r\n        },{\r\n            x: 100,\r\n            y: this.height,\r\n        });\r\n    }\r\n\r\n    getLinkCtrlPoints(startPoint, endPoint, startSize, endSize) {\r\n        const extra = 10;\r\n        const start = {\r\n            x: startPoint.x,\r\n            y: startPoint.y\r\n        };\r\n        const end = {\r\n            x: endPoint.x,\r\n            y: endPoint.y\r\n        };\r\n        // 测试点x\r\n        const testX = (end.x > start.x) ? start.x + 1 : start - 1;\r\n        // 测试点y\r\n        const testY = (end.y - start.y) / (end.x - start.x) * testX;\r\n        // 垂直连线\r\n        if (start.x === end.x) {\r\n            return [[startPoint.x, startPoint.y], [endPoint.x, endPoint.y]];\r\n        }\r\n        const startSide = _utils__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getPointInRectSide(startPoint, startSize);\r\n        const endSide = _utils__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getPointInRectSide(endPoint, endSize);\r\n\r\n        const result = [[startPoint.x, startPoint.y]];\r\n        if (startSide === 1 && endSide === 0) {\r\n            if (end.x > start.x) {\r\n                let lastPoint = [end.x, start.y];\r\n                if (point_in_polygon__WEBPACK_IMPORTED_MODULE_0___default()(lastPoint, _utils__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getPointsFromRect(endSize.x, endSize.y, endSize.w, endSize.h))) {\r\n                    lastPoint = [endSize.x - extra, start.y];\r\n                    result.push([lastPoint[0], lastPoint[1]]);\r\n                    if (end.y > start.y) {\r\n                        lastPoint = [lastPoint[0], end.y + extra];\r\n                        result.push([lastPoint[0], lastPoint[1]]);\r\n                        \r\n                        lastPoint = [end.x, lastPoint[1]];\r\n                        result.push([lastPoint[0], lastPoint[1]]);\r\n                    } else {\r\n                        lastPoint = [lastPoint[0], end.y - extra];\r\n                        result.push([lastPoint[0], lastPoint[1]]);\r\n                        \r\n                        lastPoint = [end.x, lastPoint[1]];\r\n                        result.push([lastPoint[0], lastPoint[1]]);\r\n                    }\r\n                    \r\n                } else {\r\n                    result.push(lastPoint);\r\n                }\r\n            } else {\r\n                let lastPoint = [start.x + extra, start.y];\r\n                result.push([lastPoint[0], lastPoint[1]]);\r\n                if (end.y > start.y) {\r\n                    lastPoint = [lastPoint[0], end.y - extra];\r\n                    result.push([lastPoint[0], lastPoint[1]]);\r\n                    result.push([end.x, end.y - extra]);\r\n                } else {\r\n                    lastPoint = [lastPoint[0], end.y - extra];\r\n                    result.push([lastPoint[0], lastPoint[1]]);\r\n                    result.push([end.x, end.y - extra]);\r\n                }\r\n                result.push([end.x, result[result.length - 1][1]]);\r\n            }\r\n        } else if (startSide === 2 && endSide === 0) {\r\n            if (end.y > start.y) {\r\n                let lastPoint = [start.x, start.y + extra];\r\n                result.push([lastPoint[0], lastPoint[1]]);\r\n                result.push([end.x, lastPoint[1]]);\r\n            } else {\r\n                let lastPoint = [start.x, start.y + extra];\r\n                result.push([lastPoint[0], lastPoint[1]]);\r\n                lastPoint = [end.x, lastPoint[1]];\r\n                if (point_in_polygon__WEBPACK_IMPORTED_MODULE_0___default()(lastPoint, _utils__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getPointsFromRect(endSize.x, endSize.y, endSize.w, endSize.h))) {\r\n                    lastPoint = [endSize.x - extra, lastPoint[1]];\r\n                    result.push([lastPoint[0], lastPoint[1]]);\r\n                    result.push([lastPoint[0], end.y - extra]);\r\n                    result.push([end.x, end.y - extra]);\r\n                } else {\r\n                    result.push([lastPoint[0], lastPoint[1]]);\r\n                }\r\n            }\r\n        }\r\n\r\n        result.push([endPoint.x, endPoint.y]);\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * 重定向画布中心点\r\n     * @param {*} point \r\n     */\r\n    forceCenter(point) {\r\n        const width = this.containerSize.width;\r\n        const height = this.containerSize.height;\r\n\r\n        this.showCtx.clearRect(0, 0, width, height);\r\n        this.editCtx.clearRect(0, 0, width, height);\r\n\r\n        this.startPoint = {\r\n            x: point.x - width / 2,\r\n            y: point.y - height / 2\r\n        };\r\n    }\r\n\r\n    clearPanel(ctx) {\r\n        const width = this.containerSize.width;\r\n        const height = this.containerSize.height;\r\n        if (ctx) {\r\n            ctx.clearRect(0, 0, width, height);\r\n        } else {\r\n            this.showEngine.clearRect(0, 0, width, height);\r\n            this.editEngine.clearRect(0, 0, width, height);\r\n        }\r\n    }\r\n\r\n    drawRect(ctx, x, y, w, h) {\r\n        ctx.rect(x, y, w, h, { stroke: 'green' });\r\n    }\r\n\r\n    /**\r\n     * 绘制默认图形\r\n     * @param {*} ctx \r\n     * @param {*} shape \r\n     * @param {*} config \r\n     * @param {*} groupConfig \r\n     */\r\n    drawDefaultShape(ctx, shape, config, groupConfig, defaultStart) {\r\n        const point = this.mCoordManage.pointToCanvasCoord(groupConfig);\r\n        \r\n        const groupX = defaultStart ? groupConfig.x - defaultStart.x : point.x;\r\n        const groupY = defaultStart ? groupConfig.y - defaultStart.y : point.y;\r\n         \r\n        const cfg = config.attr;\r\n        const option = Object.assign({}, config.attr);\r\n        if (shape === _Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].defautShape.rect) {\r\n            ctx.rect(groupX + cfg.x, groupY + cfg.y, cfg.width, cfg.height, option);\r\n        } else if (shape === _Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].defautShape.text) {\r\n            const fontFamily = 'Arial';\r\n            option.font = (cfg.fontSize || 12) + 'px' + (' ' + (cfg.fontFamily || fontFamily));\r\n            ctx.text(groupX + cfg.x, groupY + cfg.y, cfg.label, option);\r\n        } else if (shape === _Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].defautShape.polygon) {\r\n            const ps = [];\r\n            cfg.points.forEach(it => {\r\n                ps.push(_utils__WEBPACK_IMPORTED_MODULE_3__[\"default\"].arrayToPoint(it));\r\n            });\r\n            ctx.polygon(_Point__WEBPACK_IMPORTED_MODULE_6__[\"default\"].pointsAddOffset(ps, _Point__WEBPACK_IMPORTED_MODULE_6__[\"default\"].create(groupX, groupY)), option);\r\n        } else if (shape === _Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].defautShape.ellipse) {\r\n            ctx.ellipse(groupX + cfg.x, groupY + cfg.y, cfg.a, cfg.b, option);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 绘制控制点\r\n     * @param {*} ctx \r\n     * @param {*} points \r\n     */\r\n    drawAnchorPoint(ctx, points) {\r\n        const radius = 4;\r\n        const option = {\r\n            fill: _Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].lineStroke\r\n        };\r\n        points.forEach(it => {\r\n            ctx.circle(this.mCoordManage.pointToCanvasCoord(it), radius, option);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 绘制连线\r\n     * @param {*} ctx \r\n     * @param {*} points \r\n     */\r\n    drawLinkLines(ctx, points) {\r\n        const option = {\r\n            stroke: _Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].lineStroke,\r\n            closePath: false\r\n        };\r\n        const ps = [];\r\n        points.forEach(it => {\r\n            ps.push(_utils__WEBPACK_IMPORTED_MODULE_3__[\"default\"].arrayToPoint(it));\r\n        });\r\n        ctx.polygon(this.mCoordManage.pointsToCanvasCoord(ps), option);\r\n    }\r\n\r\n    /**\r\n     * 绘制连续的箭头\r\n     * @param {*} ctx \r\n     * @param {*} points \r\n     */\r\n    drawLinkArrow(ctx, points) {\r\n        const option = {\r\n            stroke: _Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].lineStroke,\r\n            closePath: false\r\n        };\r\n        const ps = points;\r\n        ctx.polygon(this.mCoordManage.pointsToCanvasCoord(ps), option);\r\n    }\r\n\r\n    drawLine(ctx, start, end) {\r\n        const option = {\r\n            stroke: _Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].lineStroke,\r\n            closePath: false\r\n        };\r\n        ctx.polygon([start, end], option);\r\n    }\r\n\r\n    renderEditPanel() {\r\n\r\n    }\r\n\r\n    renderAnchorLinkLine(start, end, anchorType = _Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].anchorStroke.default) {\r\n        this.clearPanel(this.editEngine);\r\n\r\n        const gm = this.model.get(_Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].instance.groupManage);\r\n        const groups = gm.getList();\r\n\r\n        // 绘制节点控制点\r\n        groups.forEach(it => {\r\n            if (it.type === _Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].groupType.line) {\r\n                return ;\r\n            }\r\n            this.drawAnchorPoint(this.editEngine, it.anchorPoints);\r\n        });\r\n\r\n        // 绘制编辑模式控件\r\n        this.renderDefaultEditItem();\r\n\r\n        const ctx = this.editEngine;\r\n        const option = {\r\n            stroke: anchorType,\r\n            closePath: false\r\n        };\r\n        ctx.polygon([start, end], option);\r\n    }\r\n}\n\n//# sourceURL=webpack:///./src/Draw.js?");

/***/ }),

/***/ "./src/EventHandler.js":
/*!*****************************!*\
  !*** ./src/EventHandler.js ***!
  \*****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return EventHandler; });\n/* harmony import */ var point_in_polygon__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! point-in-polygon */ \"./node_modules/_point-in-polygon@1.0.1@point-in-polygon/index.js\");\n/* harmony import */ var point_in_polygon__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(point_in_polygon__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Constants__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Constants */ \"./src/Constants.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./utils */ \"./src/utils/index.js\");\n/* harmony import */ var _utils_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils/dom */ \"./src/utils/dom.js\");\n/* harmony import */ var _CollideManage__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./CollideManage */ \"./src/CollideManage.js\");\n/* harmony import */ var _Point__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Point */ \"./src/Point.js\");\n/*\r\n * Created on Mon Apr 30 2018\r\n *\r\n * Copyright (c) 2018 Your Company\r\n */\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst getElementViewTop = _utils_dom__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getElementViewTop;\r\nconst getElementViewLeft = _utils_dom__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getElementViewLeft;\r\n\r\nclass EventHandler {\r\n    constructor(container, drawHandler) {\r\n        this.container = container;\r\n        this.drawHandler = drawHandler;\r\n        this.mCollideManage = new _CollideManage__WEBPACK_IMPORTED_MODULE_4__[\"default\"](this.drawHandler.model);\r\n        this.model = this.drawHandler.model;\r\n        this.gm = this.model.get(_Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].instance.groupManage);\r\n\r\n        this.addEventListener(this.container, 'click', this.onClick.bind(this));\r\n        this.addEventListener(this.container, 'mousedown', this.onMouseDown.bind(this));\r\n        this.addEventListener(this.container, 'mouseup', this.onMouseUp.bind(this));\r\n        this.addEventListener(this.container, 'mousemove', this.onMouseMove.bind(this));\r\n        // this.addEventListener(this.container, 'click', this.onClick.bind(this));\r\n\r\n        this.draging = false;\r\n        this.dragObject = null;\r\n        // 鼠标点击模式\r\n        this.mouseDownMode = _Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].eventMode.default;\r\n        // 鼠标点击坐标\r\n        this.mouseDownPoint = null;\r\n        \r\n    }\r\n\r\n    addEventListener(dom, type, callback) {\r\n        dom.addEventListener(type, callback);\r\n    }\r\n\r\n    onClick(e) {\r\n        console.log('click');\r\n        const clickPoint = {\r\n            x: e.clientX,\r\n            y: e.clientY\r\n        };\r\n        // console.log(clickPoint);\r\n        // const x = getElementViewLeft(this.container);\r\n        // const y = getElementViewTop(this.container);\r\n        // // console.log(x, y);\r\n\r\n        // let realX = clickPoint.x - x;\r\n        // let realY = clickPoint.y - y;\r\n\r\n        // // canvas点击相对于父容器坐标\r\n        // console.log(realX, realY);\r\n\r\n        // const parent = this.container.parentElement;\r\n        // realX += parent.scrollLeft;\r\n        // realY += parent.scrollTop;\r\n\r\n        // // canvas点击的真实坐标\r\n        // console.log(realX, realY);\r\n\r\n        // const startPoint = this.drawHandler.startPoint;\r\n        // realX += startPoint.x;\r\n        // realY += startPoint.y;\r\n\r\n        // console.log(realX, realY);\r\n        // this.sendItemClick([realX, realY]);\r\n        // const \r\n\r\n        const p = this.getPointObject(clickPoint);\r\n        if (this.checkPointInGroup([p.coordPoint.x, p.coordPoint.y])) {\r\n            console.log('in group');\r\n        }\r\n    }\r\n\r\n    sendItemClick(point) {\r\n        const list = this.drawHandler.model.get(_Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].groupList, []);\r\n\r\n        let clickItem;\r\n        for(let len = list.length, i = len - 1; i >= 0; --i) {\r\n            const it = list[i].list;\r\n            for (const j in it) {\r\n                if (point_in_polygon__WEBPACK_IMPORTED_MODULE_0___default()(point, it[j].polygonPoints)) {\r\n                    clickItem = it;\r\n                    break;\r\n                }\r\n            }\r\n            if (clickItem) break;\r\n        }\r\n        console.log(clickItem);\r\n    }\r\n\r\n    /**\r\n     * 检测点是否在控制点上\r\n     * @param {} arrPoint \r\n     */\r\n    checkPointInAnchor(arrPoint) {\r\n        const list = this.drawHandler.model.get(_Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].groupList, []);\r\n\r\n        let clickItem;\r\n        for(let len = list.length, i = len - 1; i >= 0; --i) {\r\n            const it = list[i];\r\n            if (it.anchorPoints) {\r\n                for(let j = 0; j < it.anchorPoints.length; ++j) {\r\n                    if (_utils__WEBPACK_IMPORTED_MODULE_2__[\"default\"].inCircle(arrPoint, it.anchorPoints[j], 4)) {\r\n                        console.log('in anchor' , it);\r\n                        return it;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * 检测点是否在节点上\r\n     */\r\n    checkPointInGroup(arrPoint) {\r\n        const list = this.drawHandler.model.get(_Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].groupList, []);\r\n\r\n        let clickItem;\r\n        for(let len = list.length, i = len - 1; i >= 0; --i) {\r\n            const it = list[i].list;\r\n            for (const j in it) {\r\n                if (point_in_polygon__WEBPACK_IMPORTED_MODULE_0___default()(arrPoint, it[j].polygonPoints)) {\r\n                    return list[i];\r\n                    // clickItem = it;\r\n                    // break;\r\n                }\r\n            }\r\n            // if (clickItem) break;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * 获取坐标点对象\r\n     * @param {*} point \r\n     */\r\n    getPointObject(point) {\r\n        // const result = {\r\n\r\n        // };\r\n        // console.log(clickPoint);\r\n        const x = getElementViewLeft(this.container);\r\n        const y = getElementViewTop(this.container);\r\n        // console.log(x, y);\r\n\r\n        let realX = point.x - x;\r\n        let realY = point.y - y;\r\n\r\n        // canvas点击相对于父容器坐标\r\n        // console.log(realX, realY);\r\n\r\n        const domPoint = {\r\n            x: realX,\r\n            y: realY\r\n        }\r\n\r\n        // const parent = this.container.parentElement;\r\n        // realX += parent.scrollLeft;\r\n        // realY += parent.scrollTop;\r\n\r\n\r\n        // canvas点击的真实坐标\r\n        // console.log(realX, realY);\r\n\r\n        const startPoint = this.drawHandler.startPoint;\r\n        realX += startPoint.x;\r\n        realY += startPoint.y;\r\n\r\n        const coordPoint = {\r\n            x: realX,\r\n            y: realY\r\n        }\r\n\r\n        return {\r\n            domPoint,\r\n            coordPoint\r\n        }\r\n    }\r\n\r\n    onMouseDown(e) {\r\n        const clickPoint = {\r\n            x: e.clientX,\r\n            y: e.clientY\r\n        };\r\n        this.mouseDownPoint = clickPoint;\r\n        this.mouseDownMode = _Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].eventMode.default;\r\n        const p = this.getPointObject(clickPoint);\r\n\r\n        // 检测是否点击控制点\r\n        let obj = this.mCollideManage.checkPointInAnchor(p.coordPoint);\r\n        if (obj) {\r\n            this.mouseDownMode = _Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].eventMode.anchor;\r\n            this.dragObject = obj;\r\n            console.log(obj);\r\n            return;\r\n        }\r\n\r\n        // 检测是否点击编辑节点\r\n        obj = this.mCollideManage.checkPointInEditGroup(p.coordPoint);\r\n        if (obj) {\r\n            const gm = this.model.get(_Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].instance.groupManage);\r\n            const config = Object.assign({}, obj.config);\r\n            config.x = p.coordPoint.x;\r\n            config.y = p.coordPoint.y;\r\n            this.dragObject = gm.addItem(config);\r\n            this.mouseDownMode = _Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].eventMode.editGroup;\r\n            console.log(obj);\r\n            return;\r\n        }\r\n\r\n        // 检测是否点击节点\r\n        obj = this.mCollideManage.checkPointInGroup(p.coordPoint);\r\n        if (obj) {\r\n            this.dragObject = obj;\r\n            this.gm.setActive(obj);\r\n            this.drawHandler.renderActive();\r\n            this.mouseDownMode = _Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].eventMode.group;\r\n            console.log(obj);\r\n        }\r\n    }\r\n\r\n    \r\n    onMouseMove(e) {\r\n        const clickPoint = {\r\n            x: e.clientX,\r\n            y: e.clientY\r\n        };\r\n        if (_Point__WEBPACK_IMPORTED_MODULE_5__[\"default\"].equal(this.mouseDownPoint, clickPoint)){\r\n            return;\r\n        }\r\n\r\n        const p = this.getPointObject(clickPoint);\r\n\r\n        if (this.mouseDownMode === _Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].eventMode.anchor) {\r\n            // 检测是否点击控制点\r\n            const obj = this.mCollideManage.checkPointInAnchor(p.coordPoint);\r\n            let stroke = _Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].anchorStroke.default;\r\n            if (obj) {\r\n                stroke = this.mCollideManage.checkAnchorsLink(this.dragObject, obj);\r\n                if (stroke) stroke = _Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].anchorStroke.yes;\r\n                else stroke = _Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].anchorStroke.no;\r\n            }\r\n            this.drawHandler.renderAnchorLinkLine(this.getPointObject(this.mouseDownPoint).domPoint, p.domPoint, stroke);\r\n            return;\r\n        }\r\n\r\n        if (this.mouseDownMode === _Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].eventMode.editGroup) {\r\n            this.dragObject.setPosition(p.coordPoint);\r\n            this.drawHandler.render();\r\n            return;\r\n        }\r\n\r\n        if (this.mouseDownMode === _Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].eventMode.group) {\r\n            this.dragObject.setPosition(p.coordPoint);\r\n            this.drawHandler.render();\r\n        }\r\n        // const item = this.checkPointInGroup([p.coordPoint.x, p.coordPoint.y]);\r\n        // if (item) {\r\n        //     console.log('in group');\r\n        // }\r\n        // if (this.draging) {\r\n        //     // this.dragObject.config.x = p.coordPoint.x;\r\n        //     // this.dragObject.config.y = p.coordPoint.y;\r\n        //     this.dragObject.setPosition(p.coordPoint);\r\n        //     const list = this.drawHandler.model.get(Constants.groupList, []);\r\n        //     this.drawHandler.clearPanel();\r\n        //     this.drawHandler.render(list);\r\n        //     // console.log(this.dragObject);\r\n        // }\r\n        // console.log(p);\r\n    }\r\n\r\n    onMouseUp(e) {\r\n        this.draging = false;\r\n        console.log('onMouseUp');\r\n        const clickPoint = {\r\n            x: e.clientX,\r\n            y: e.clientY\r\n        };\r\n        const p = this.getPointObject(clickPoint);\r\n\r\n        if (this.mouseDownMode === _Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].eventMode.anchor) {\r\n            // 检测是否点击控制点\r\n            const obj = this.mCollideManage.checkPointInAnchor(p.coordPoint);\r\n            if (obj) {\r\n                const link = this.mCollideManage.checkAnchorsLink(this.dragObject, obj);\r\n\r\n                const config = {\r\n                    sourceId: this.dragObject.obj.config.id, \r\n                    targetId: obj.obj.config.id,\r\n                    sourceAnchor: this.dragObject.index,\r\n                    targetAnchor: obj.index\r\n                };\r\n                console.log('up============', config, this.dragObject, obj);\r\n                if (link) this.gm.addItem(config, _Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].groupType.line);\r\n                this.drawHandler.render();\r\n            } else {\r\n                this.drawHandler.render();\r\n            }\r\n        }\r\n\r\n        if (this.mouseDownMode === _Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].eventMode.editGroup) {\r\n            this.dragObject.setPosition(p.coordPoint);\r\n            this.drawHandler.render();\r\n        }\r\n\r\n        if (this.mouseDownMode === _Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].eventMode.group) {\r\n            this.dragObject.setPosition(p.coordPoint);\r\n            this.drawHandler.render();\r\n        }\r\n\r\n        // if (this.checkPointInGroup([p.coordPoint.x, p.coordPoint.y])) {\r\n        //     console.log('in group');\r\n        // }\r\n        // console.log(p);\r\n        this.mouseDownMode = _Constants__WEBPACK_IMPORTED_MODULE_1__[\"default\"].eventMode.default;\r\n    }\r\n\r\n}\n\n//# sourceURL=webpack:///./src/EventHandler.js?");

/***/ }),

/***/ "./src/Group.js":
/*!**********************!*\
  !*** ./src/Group.js ***!
  \**********************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Group; });\n/* harmony import */ var point_in_polygon__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! point-in-polygon */ \"./node_modules/_point-in-polygon@1.0.1@point-in-polygon/index.js\");\n/* harmony import */ var point_in_polygon__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(point_in_polygon__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _LzFlow__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./LzFlow */ \"./src/LzFlow.js\");\n/* harmony import */ var _Constants__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Constants */ \"./src/Constants.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./utils */ \"./src/utils/index.js\");\n/*\r\n * Created on Mon Apr 30 2018\r\n *\r\n * Copyright (c) 2018 Your Company\r\n */\r\n\r\n\r\n\r\n\r\n\r\nclass Group {\r\n    constructor(cfg, type = _Constants__WEBPACK_IMPORTED_MODULE_2__[\"default\"].groupType.node) {\r\n        this.list = {};\r\n        this.config = cfg;\r\n        this.type = type;\r\n        this.anchorPointTypes = [];\r\n        this.render();\r\n    }\r\n\r\n    /**\r\n     * 添加图形\r\n     * @param {*} name \r\n     * @param {*} config \r\n     */\r\n    add(name, config) {\r\n        const cfg = config.attr;\r\n        config.polygonPoints = this.getPolygonPoints(name, cfg);\r\n        this.list[name] = config;\r\n    }\r\n\r\n    /**\r\n     * 重置坐标\r\n     * @param {*} point \r\n     */\r\n    setPosition(point) {\r\n        this.config.x = point.x;\r\n        this.config.y = point.y;\r\n        const tmp = {};\r\n        for(const name in this.list) {\r\n            const config = this.list[name];\r\n            const cfg = this.list[name].attr;\r\n            config.polygonPoints = this.getPolygonPoints(name, cfg);\r\n        }\r\n        this.parseAnchorPoints(this.anchors || []);\r\n    }\r\n\r\n    /**\r\n     * 获取四方坐标\r\n     * @param {*} name \r\n     * @param {*} cfg \r\n     */\r\n    getPolygonPoints(name, cfg) {\r\n        let result = [];\r\n        if (name === _Constants__WEBPACK_IMPORTED_MODULE_2__[\"default\"].defautShape.text) {\r\n            const width = _utils__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getTextWidth(name);\r\n            const height = cfg.fontSize || 12;\r\n            const x = cfg.x + this.config.x;\r\n            const y = cfg.y + this.config.y - height;\r\n            const points = _utils__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getPointsFromRect(x, y, width, height);\r\n            result = points;\r\n        } else if (name === _Constants__WEBPACK_IMPORTED_MODULE_2__[\"default\"].defautShape.rect) {\r\n            const width = cfg.width;\r\n            const height = cfg.height;\r\n            const x = cfg.x + this.config.x;\r\n            const y = cfg.y + this.config.y;\r\n            const points = _utils__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getPointsFromRect(x, y, width, height);\r\n            result = points;\r\n        } else if (name === _Constants__WEBPACK_IMPORTED_MODULE_2__[\"default\"].defautShape.polygon) {\r\n            const points = [];\r\n            cfg.points.forEach(it => {\r\n                points.push([it[0] + this.config.x, it[1] + this.config.y]);\r\n            });\r\n            result = points;\r\n        } else if (name === _Constants__WEBPACK_IMPORTED_MODULE_2__[\"default\"].defautShape.ellipse) {\r\n            const width = cfg.a * 2;\r\n            const height = cfg.b * 2;\r\n            const x = cfg.x + this.config.x - width / 2;\r\n            const y = cfg.y + this.config.y - height / 2;\r\n            const points = _utils__WEBPACK_IMPORTED_MODULE_3__[\"default\"].getPointsFromRect(x, y, width, height);\r\n            result = points;\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * 解析控制点\r\n     */\r\n    parseAnchorPoints(anchors){\r\n        // const achors = config.getAn\r\n        let min = {\r\n            x: 0, \r\n            y: 0\r\n        };\r\n        let max = {\r\n            x: 0, \r\n            y: 0\r\n        }\r\n        let firstTag = false;\r\n        for(const i in this.list) {\r\n            let x = 0;\r\n            let y = 0;\r\n            this.list[i].polygonPoints.forEach((it, idx) => {\r\n                if (!firstTag) {\r\n                    firstTag = true;\r\n                    min.x = max.x = it[0];\r\n                    min.y = max.y = it[1];\r\n                    return ;\r\n                }\r\n                min.x = Math.min(min.x, it[0]);\r\n                min.y = Math.min(min.y, it[1]);\r\n\r\n                max.x = Math.max(max.x, it[0]);\r\n                max.y = Math.max(max.y, it[1]);\r\n            });\r\n        }\r\n        // 图形组的尺寸\r\n        this.size = {\r\n            x: min.x,\r\n            y: min.y,\r\n            w: max.x - min.x,\r\n            h: max.y - min.y\r\n        };\r\n\r\n        const result = [];\r\n        anchors.forEach((it, idx) => {\r\n            result.push({\r\n                x: min.x + (max.x - min.x) * it[0],\r\n                y: min.y + (max.y - min.y) * it[1]\r\n            });\r\n        });\r\n        // 图形组的控制点\r\n        this.anchorPoints = result;\r\n        this.anchors = anchors;\r\n    }\r\n\r\n    render() {\r\n        let map;\r\n        if (this.type === _Constants__WEBPACK_IMPORTED_MODULE_2__[\"default\"].groupType.node) {\r\n            map = _LzFlow__WEBPACK_IMPORTED_MODULE_1__[\"default\"].nodeMap;\r\n        } else {\r\n            map = _LzFlow__WEBPACK_IMPORTED_MODULE_1__[\"default\"].lineMap;\r\n            return;\r\n        }\r\n\r\n        const hooks = map[this.config.shape];\r\n        if (!hooks) {\r\n            console.error('can not find shape: ' + this.config.shape);\r\n            return ;\r\n        }\r\n\r\n        const keyShape = hooks.draw(this.config, this);\r\n        this.parseAnchorPoints(hooks.getAnchorPoints && hooks.getAnchorPoints() || []);\r\n        this.anchorPointTypes = hooks.getAnchorPointTypes();\r\n        return keyShape;\r\n        // console.log(this.list);\r\n    }\r\n\r\n    /**\r\n     * 检测点是否在节点上\r\n     * @param {*} point \r\n     */\r\n    pointIn(point) {\r\n        const result = false;\r\n        if (this.type === _Constants__WEBPACK_IMPORTED_MODULE_2__[\"default\"].groupType.node) {\r\n            for(const i in this.list) {\r\n                const it = this.list[i];\r\n                if (point_in_polygon__WEBPACK_IMPORTED_MODULE_0___default()(_utils__WEBPACK_IMPORTED_MODULE_3__[\"default\"].pointToArray(point), it.polygonPoints)) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * 检测是否在接控制点上\r\n     * @param {*} point \r\n     */\r\n    pointInAnchor(point) {\r\n        const it = this;\r\n        if (it.anchorPoints) {\r\n            for(let j = 0; j < it.anchorPoints.length; ++j) {\r\n                if (_utils__WEBPACK_IMPORTED_MODULE_3__[\"default\"].inCircle(_utils__WEBPACK_IMPORTED_MODULE_3__[\"default\"].pointToArray(point), it.anchorPoints[j], 4)) {\r\n                    return j;\r\n                }\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n}\n\n//# sourceURL=webpack:///./src/Group.js?");

/***/ }),

/***/ "./src/GroupManage.js":
/*!****************************!*\
  !*** ./src/GroupManage.js ***!
  \****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return GroupManage; });\n/* harmony import */ var _Constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Constants */ \"./src/Constants.js\");\n/* harmony import */ var _Group__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Group */ \"./src/Group.js\");\n\r\n\r\n\r\n/**\r\n * 节点管理器\r\n */\r\nclass GroupManage {\r\n    constructor(model) {\r\n        this.model = model;\r\n    }\r\n\r\n    /**\r\n     * 添加节点\r\n     * @param {object} config 节点配置信息\r\n     * @param {string} type 节点类型\r\n     */\r\n    addItem(config, type = _Constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].groupType.node) {\r\n        const idm = this.model.get(_Constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].instance.idManage);\r\n        // 不存在自定义id，新建唯一id\r\n        if (config.id) {\r\n            idm.add(config.id);            \r\n        } else {\r\n            config.id = idm.create();\r\n        }\r\n        const item = new _Group__WEBPACK_IMPORTED_MODULE_1__[\"default\"] (config, type);\r\n        \r\n        const list = this.model.get(_Constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].groupList, []);\r\n        list.push(item);\r\n\r\n        // 节点类型\r\n        if (type === _Constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].groupType.node) {\r\n            const nodes = this.model.get(_Constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].groupNodes, {});\r\n            nodes[config.id] = item;\r\n        } else {\r\n            const lines = this.model.get(_Constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].groupLines, {});\r\n            lines[config.id] = item;\r\n        }\r\n        return item;\r\n    }\r\n\r\n    /**\r\n     * 根據配置生成\r\n     */\r\n    createItem(config, type = _Constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].groupType.node) {\r\n        const idm = this.model.get(_Constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].instance.idManage);\r\n        // 不存在自定义id，新建唯一id\r\n        if (config.id) {\r\n            idm.add(config.id);            \r\n        } else {\r\n            config.id = idm.create();\r\n        }\r\n        const item = new _Group__WEBPACK_IMPORTED_MODULE_1__[\"default\"] (config, type);\r\n        return item;\r\n    }\r\n\r\n    deleteItem(id) {\r\n \r\n    }\r\n\r\n    /**\r\n     * 获取节点集合\r\n     */\r\n    getList() {\r\n        return this.model.get(_Constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].groupList, []);\r\n    }\r\n\r\n    /**\r\n     * 设置节点为触发状态\r\n     * @param {*} obj \r\n     * @param {*} flag \r\n     */\r\n    setActive(obj, flag = true) {\r\n        if (flag === true) {\r\n            // 激发状态的节点只能有一个\r\n            const list = this.model.get(_Constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].groupList, []);\r\n            list.forEach(it => {\r\n                if (it.type === _Constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].groupType.node) {\r\n                    it.active = false;\r\n                }\r\n            });\r\n        }\r\n        \r\n        obj.active = flag;\r\n    }\r\n\r\n\r\n\r\n}\n\n//# sourceURL=webpack:///./src/GroupManage.js?");

/***/ }),

/***/ "./src/IDManage.js":
/*!*************************!*\
  !*** ./src/IDManage.js ***!
  \*************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return IDManage; });\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./utils */ \"./src/utils/index.js\");\n\r\n\r\n/**\r\n * 唯一id管理器\r\n */\r\nclass IDManage {\r\n    constructor() {\r\n        // id集合\r\n        this.map = {};\r\n    }\r\n\r\n    /**\r\n     * 添加id\r\n     * @param {*} id \r\n     */\r\n    add(id) {\r\n        this.map[id] = true;\r\n    }\r\n\r\n    /**\r\n     * 创建一个唯一id\r\n     */\r\n    create() {\r\n        while(true) {\r\n            const id = _utils__WEBPACK_IMPORTED_MODULE_0__[\"default\"].randomString();\r\n            if (this.map[id]) {\r\n                break;\r\n            }\r\n            return id;\r\n        }\r\n    }\r\n}\n\n//# sourceURL=webpack:///./src/IDManage.js?");

/***/ }),

/***/ "./src/LzFlow.js":
/*!***********************!*\
  !*** ./src/LzFlow.js ***!
  \***********************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nclass LzFlow {\r\n    constructor() {\r\n        this.nodeMap = {};\r\n        this.lineMap ={};\r\n    }\r\n\r\n    registerNode(name, hooks) {\r\n        this.nodeMap[name] = hooks;\r\n    }\r\n    \r\n    registerLine(name, hooks) {\r\n        this.lineMap[name] = hooks;\r\n    }\r\n}\r\n\r\nconst mLzFlow = new LzFlow();\r\n/* harmony default export */ __webpack_exports__[\"default\"] = (mLzFlow);\n\n//# sourceURL=webpack:///./src/LzFlow.js?");

/***/ }),

/***/ "./src/Model.js":
/*!**********************!*\
  !*** ./src/Model.js ***!
  \**********************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Model; });\n/* harmony import */ var _Constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./Constants */ \"./src/Constants.js\");\n/* harmony import */ var _Group__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./Group */ \"./src/Group.js\");\n\r\n\r\n\r\nclass Model {\r\n    constructor() {\r\n        this.attrs = {};\r\n    }\r\n\r\n    set(key, value) {\r\n        this.attrs[key] = value;\r\n    }\r\n\r\n    get(key, defaultValue){\r\n        return this.attrs[key] || defaultValue;\r\n    }\r\n\r\n    setDefaultEdit() {\r\n        const data = [\r\n            {\r\n                shape: _Constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prefix + 'Start',\r\n                x: 200,\r\n                y: 180,\r\n                name: '开始',\r\n            },\r\n            {\r\n                shape: _Constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prefix + 'Produce',\r\n                x: 200,\r\n                y: 180,\r\n                name: '步骤',\r\n            },\r\n            {\r\n                shape: _Constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prefix + 'Judge',\r\n                x: 400,\r\n                y: 230,\r\n                name: '判断',\r\n            },\r\n            {\r\n                shape: _Constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prefix + 'End',\r\n                x: 400,\r\n                y: 230,\r\n                name: '结束',\r\n            }\r\n        ];\r\n\r\n        const gm = this.get(_Constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].instance.groupManage);\r\n        console.log(gm);\r\n        const result = [];\r\n        data.forEach(it => {\r\n            result.push(gm.createItem(it));\r\n        });\r\n        this.set(_Constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].groupEditList, result);\r\n    }\r\n\r\n    \r\n}\n\n//# sourceURL=webpack:///./src/Model.js?");

/***/ }),

/***/ "./src/Point.js":
/*!**********************!*\
  !*** ./src/Point.js ***!
  \**********************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Point; });\n/**\r\n * 坐标表示\r\n */\r\nclass Point {\r\n    constructor(x, y) {\r\n        this.x = x;\r\n        this.y = y;\r\n    }\r\n\r\n    /**\r\n     * 创建坐标\r\n     * @param {*} x \r\n     * @param {*} y \r\n     */\r\n    static create(x, y) {\r\n        return new Point(x, y);\r\n    }\r\n\r\n    /**\r\n     * 坐标相加\r\n     * @param {Point} p1 \r\n     * @param {Point} p2 \r\n     */\r\n    static add(p1, p2) {\r\n        return new Point(p1.x + p2.x, p1.y + p2.y);\r\n    }\r\n\r\n    /**\r\n     * 坐标相减\r\n     * @param {Point} p1 减数\r\n     * @param {Point} p2 被减数\r\n     */\r\n    static sub(p1, p2) {\r\n        return new Point(p1.x - p2.x, p1.y - p2.y);\r\n    }\r\n\r\n    /**\r\n     * 一组坐标增加偏移量\r\n     * @param {*} arr \r\n     * @param {*} offset \r\n     */\r\n    static pointsAddOffset(arr, offset) {\r\n        return arr.map(it => {\r\n            return new Point(it.x + (offset.x || 0), it.y + (offset.y || 0));\r\n        });\r\n    }\r\n\r\n    static equal(p1, p2) {\r\n        return (p1 && p2 && p1.x === p2.x && p1.y === p2.y)\r\n    }\r\n}\n\n//# sourceURL=webpack:///./src/Point.js?");

/***/ }),

/***/ "./src/engine/CanvasEngine.js":
/*!************************************!*\
  !*** ./src/engine/CanvasEngine.js ***!
  \************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return CanvasEngine; });\n/* harmony import */ var _EngineInterface__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./EngineInterface */ \"./src/engine/EngineInterface.js\");\n\r\nclass CanvasEngine extends _EngineInterface__WEBPACK_IMPORTED_MODULE_0__[\"default\"] {\r\n    constructor(context) {\r\n        super();\r\n        this.ctx = context;\r\n    }\r\n\r\n    /**\r\n     * 绘制线段\r\n     * @param {Point} start 起点\r\n     * @param {Point} end 终点\r\n     * @param {Object} options 配置项 \r\n     */\r\n    line (start, end, options) {\r\n        const ctx = this.ctx;\r\n        this.checkOptions(options);\r\n        ctx.moveTo(start.x, start.y);\r\n        ctx.lineTo(end.x, end.y);\r\n        this.afterDoDraw(options);\r\n    };\r\n\r\n    /**\r\n     * 绘制圆\r\n     * @param {Point} center 中心点\r\n     * @param {Double} radius 半径\r\n     * @param {Object} options 配置项 \r\n     */\r\n    circle (center, radius, options) {\r\n        const ctx = this.ctx;\r\n        this.checkOptions(options);\r\n        ctx.arc(center.x, center.y, radius, 0, Math.PI * 2);\r\n        this.afterDoDraw(options);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {Double} x \r\n     * @param {Double} y \r\n     * @param {Double} w 宽\r\n     * @param {Double} h 高\r\n     * @param {Object} options 配置项 \r\n     */\r\n    rect(x, y, w, h, options) {\r\n        const ctx = this.ctx;\r\n        this.checkOptions(options);\r\n        ctx.rect(x, y, w, h);\r\n        this.afterDoDraw(options);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {Double} x \r\n     * @param {Double} y \r\n     * @param {Object} options 配置项 \r\n     */\r\n    text(x, y, text, options) {\r\n        const ctx = this.ctx;\r\n        this.checkOptions(options);\r\n        ctx.font = options.font;\r\n        let method = 'fillText';\r\n        if (options.stroke) {\r\n            method = 'strokeText';\r\n        }\r\n        ctx[method](text, x, y);\r\n        this.afterDoDraw(options);\r\n    }\r\n\r\n    /**\r\n     * 绘制多边形\r\n     * @param {Array} points 顶点集合 \r\n     * @param {Object} options 配置项 \r\n     */\r\n    polygon (points, options) {\r\n        const ctx = this.ctx;\r\n        this.checkOptions(options);\r\n        points.forEach((it, idx) => {\r\n            if (idx === 0) {\r\n                ctx.moveTo(it.x, it.y);\r\n            } else {\r\n                ctx.lineTo(it.x, it.y);\r\n            }\r\n        });\r\n        this.afterDoDraw(options);\r\n    }\r\n\r\n    /**\r\n     * 绘制椭圆\r\n     * @param {Double} x 中心点\r\n     * @param {Double} y 中心点\r\n     * @param {Double} a 长半轴\r\n     * @param {Double} b 短半轴\r\n     * @param {Object} options 配置项 \r\n     */\r\n    ellipse(x, y, a, b, options) {\r\n        const context = this.ctx;\r\n        this.checkOptions(options);\r\n        //关键是bezierCurveTo中两个控制点的设置\r\n        //0.5和0.6是两个关键系数（在本函数中为试验而得）\r\n        const ox = 0.5 * a;\r\n        const oy = 0.6 * b;\r\n\r\n        context.save();\r\n        context.translate(x, y);\r\n        // context.beginPath();\r\n        //从椭圆纵轴下端开始逆时针方向绘制\r\n        context.moveTo(0, b); \r\n        context.bezierCurveTo(ox, b, a, oy, a, 0);\r\n        context.bezierCurveTo(a, -oy, ox, -b, 0, -b);\r\n        context.bezierCurveTo(-ox, -b, -a, -oy, -a, 0);\r\n        context.bezierCurveTo(-a, oy, -ox, b, 0, b);\r\n        this.afterDoDraw(options);\r\n    }\r\n\r\n    checkOptions(options) {\r\n        const ctx = this.ctx;\r\n        if (options.save !== false) {\r\n            ctx.save();\r\n        }\r\n        if(options.stroke) {\r\n            ctx.strokeStyle = options.stroke;\r\n        }\r\n        if(options.fill) {\r\n            ctx.fillStyle = options.fill;\r\n        }\r\n        if(options.lineWidth) {\r\n            ctx.lineWidth = options.lineWidth;\r\n        }\r\n        if(options.dash) {\r\n            ctx.setLineDash(options.dash);\r\n        }\r\n        if(options.beginPath !== false) {\r\n            ctx.beginPath();\r\n        }\r\n    }\r\n\r\n    afterDoDraw(options) {\r\n        const ctx = this.ctx;\r\n        \r\n        if(options.closePath !== false) {\r\n            ctx.closePath();\r\n        }\r\n        if(options.stroke) {\r\n            ctx.stroke();\r\n        }\r\n        if(options.fill) {\r\n            ctx.fill();\r\n        }\r\n        if (options.restore !== false) {\r\n            ctx.restore();\r\n        }\r\n    }\r\n\r\n    clearRect(x, y, width, height) {\r\n        this.ctx.clearRect(x, y, width, height);\r\n    }\r\n}\n\n//# sourceURL=webpack:///./src/engine/CanvasEngine.js?");

/***/ }),

/***/ "./src/engine/EngineInterface.js":
/*!***************************************!*\
  !*** ./src/engine/EngineInterface.js ***!
  \***************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return EngineInterface; });\nclass EngineInterface {\r\n    /**\r\n     * 绘制线段\r\n     * @param {Point} start 起点\r\n     * @param {Point} end 终点\r\n     * @param {Object} options 配置项 \r\n     */\r\n    line (start, end, options) {};\r\n\r\n    /**\r\n     * 绘制圆\r\n     * @param {Point} center 中心点\r\n     * @param {Double} radius 半径\r\n     * @param {Object} options 配置项 \r\n     */\r\n    circle (center, radius, options) {}\r\n\r\n    /**\r\n     * \r\n     * @param {Double} x \r\n     * @param {Double} y \r\n     * @param {Double} w 宽\r\n     * @param {Double} h 高\r\n     * @param {Object} options 配置项 \r\n     */\r\n    rect(x, y, w, h, options) {}\r\n\r\n    /**\r\n     * \r\n     * @param {Double} x \r\n     * @param {Double} y \r\n     * @param {Object} options 配置项 \r\n     */\r\n    text(x, y, text, options) {}\r\n\r\n    /**\r\n     * 绘制多边形\r\n     * @param {Array} points 顶点集合 \r\n     * @param {Object} options 配置项 \r\n     */\r\n    polygon (points, options) {}\r\n\r\n    /**\r\n     * 绘制椭圆\r\n     * @param {Double} x 中心点\r\n     * @param {Double} y 中心点\r\n     * @param {Double} a 长半轴\r\n     * @param {Double} b 短半轴\r\n     * @param {Object} options 配置项 \r\n     */\r\n    ellipse(x, y, a, b, options) {}\r\n\r\n}\n\n//# sourceURL=webpack:///./src/engine/EngineInterface.js?");

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Flow; });\n/* harmony import */ var _LzFlow__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./LzFlow */ \"./src/LzFlow.js\");\n/* harmony import */ var _nodes__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./nodes */ \"./src/nodes/index.js\");\n/* harmony import */ var _Draw__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./Draw */ \"./src/Draw.js\");\n/* harmony import */ var _Constants__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./Constants */ \"./src/Constants.js\");\n/* harmony import */ var _Model__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./Model */ \"./src/Model.js\");\n/* harmony import */ var _Group__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./Group */ \"./src/Group.js\");\n/* harmony import */ var _GroupManage__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./GroupManage */ \"./src/GroupManage.js\");\n/* harmony import */ var _IDManage__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./IDManage */ \"./src/IDManage.js\");\n/* harmony import */ var _CoordManage__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./CoordManage */ \"./src/CoordManage.js\");\n/*\r\n * Created on Mon Apr 30 2018\r\n *\r\n * Copyright (c) 2018 Your Company\r\n */\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass Flow {\r\n    constructor(options){\r\n        this.config = {\r\n            panel: ''\r\n        };\r\n        Object.assign(this.config, options);\r\n\r\n        // 初始化模型\r\n        this.model = new _Model__WEBPACK_IMPORTED_MODULE_4__[\"default\"]();\r\n\r\n        // 节点管理\r\n        this.gm = new _GroupManage__WEBPACK_IMPORTED_MODULE_6__[\"default\"](this.model);\r\n        this.model.set(_Constants__WEBPACK_IMPORTED_MODULE_3__[\"default\"].instance.groupManage, this.gm);\r\n\r\n        // id管理器\r\n        this.mIDManage = new _IDManage__WEBPACK_IMPORTED_MODULE_7__[\"default\"]();\r\n        this.model.set(_Constants__WEBPACK_IMPORTED_MODULE_3__[\"default\"].instance.idManage, this.mIDManage);\r\n\r\n        // 坐标管理器\r\n        const mCoordManage = new _CoordManage__WEBPACK_IMPORTED_MODULE_8__[\"default\"](this.model);\r\n        this.model.set(_Constants__WEBPACK_IMPORTED_MODULE_3__[\"default\"].instance.corrdManage, mCoordManage);\r\n\r\n        // 初始化模型数据\r\n        this.model.set(_Constants__WEBPACK_IMPORTED_MODULE_3__[\"default\"].groupList, []);\r\n        this.model.set(_Constants__WEBPACK_IMPORTED_MODULE_3__[\"default\"].groupNodes, {});\r\n        this.model.set(_Constants__WEBPACK_IMPORTED_MODULE_3__[\"default\"].groupLines, {});\r\n\r\n        const cfg = this.config;\r\n        this.drawHandler = new _Draw__WEBPACK_IMPORTED_MODULE_2__[\"default\"](cfg.panel, this.model, cfg.height);\r\n\r\n        this.model.setDefaultEdit();\r\n    }\r\n\r\n    render() {\r\n        this.drawHandler.render();\r\n    }\r\n\r\n    source(nodes, lines) {\r\n        const data = [\r\n            {\r\n                shape: _Constants__WEBPACK_IMPORTED_MODULE_3__[\"default\"].prefix + 'Produce',\r\n                x: 150,\r\n                y: 30,\r\n                name: '劳动节',\r\n                id: 1,\r\n            },\r\n            {\r\n                shape: _Constants__WEBPACK_IMPORTED_MODULE_3__[\"default\"].prefix + 'Produce',\r\n                x: 200,\r\n                y: 180,\r\n                name: 7898,\r\n                id: 2,\r\n            },\r\n            {\r\n                shape: _Constants__WEBPACK_IMPORTED_MODULE_3__[\"default\"].prefix + 'Judge',\r\n                x: 400,\r\n                y: 230,\r\n                name: 1231,\r\n                id: 3\r\n            },\r\n            {\r\n                shape: _Constants__WEBPACK_IMPORTED_MODULE_3__[\"default\"].prefix + 'Start',\r\n                x: 500,\r\n                y: 230,\r\n                name: '开始',\r\n                id: 4\r\n            },\r\n            {\r\n                shape: _Constants__WEBPACK_IMPORTED_MODULE_3__[\"default\"].prefix + 'End',\r\n                x: 500,\r\n                y: 130,\r\n                name: '结束',\r\n                id: 5\r\n            }\r\n        ];\r\n        const lineData = [\r\n            {\r\n                sourceId: 1, \r\n                targetId: 3,\r\n                sourceAnchor: 1,\r\n                targetAnchor: 0\r\n            },\r\n            {\r\n                sourceId: 3, \r\n                targetId: 2,\r\n                sourceAnchor: 1,\r\n                targetAnchor: 0\r\n            }\r\n        ];\r\n\r\n        data.forEach(it => {\r\n            this.gm.addItem(JSON.parse(JSON.stringify(it)));\r\n        });\r\n        lineData.forEach(it => {\r\n            this.gm.addItem(JSON.parse(JSON.stringify(it)), _Constants__WEBPACK_IMPORTED_MODULE_3__[\"default\"].groupType.line);\r\n        });\r\n    }\r\n\r\n    addEventListener(type, callback) {\r\n        this.model.set(_Constants__WEBPACK_IMPORTED_MODULE_3__[\"default\"].eventTypePrefix + type, callback);\r\n    }\r\n\r\n    center(point) {\r\n        this.drawHandler.forceCenter(point);\r\n        this.render();\r\n    }\r\n}\r\n\r\n\r\nconst mflow = new Flow({\r\n    panel,\r\n    height: 700\r\n});\r\nmflow.source();\r\nmflow.render();\r\n\r\nwindow.lzFlow = mflow;\n\n//# sourceURL=webpack:///./src/index.js?");

/***/ }),

/***/ "./src/nodes/end.js":
/*!**************************!*\
  !*** ./src/nodes/end.js ***!
  \**************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Constants */ \"./src/Constants.js\");\n/* harmony import */ var _LzFlow__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../LzFlow */ \"./src/LzFlow.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils */ \"./src/utils/index.js\");\n\r\n\r\n\r\n\r\nconst getdiamondPoints = _utils__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getdiamondPoints;\r\n\r\nconst name = `${_Constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prefix}End`;\r\n_LzFlow__WEBPACK_IMPORTED_MODULE_1__[\"default\"].registerNode(name, {\r\n    draw(config, group) {\r\n        let width = _utils__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getTextWidth(config.name);\r\n        const txtWidth = width;\r\n        let height = config.fontSize || 12;\r\n        const txtHeight = height;\r\n        const paddingWidth = 10;\r\n        const paddingHeight = 8;\r\n        width += paddingWidth * 2;\r\n        height += paddingHeight * 2;\r\n\r\n        const points = getdiamondPoints(0, 0, width, height);\r\n        const result = group.add('ellipse', {\r\n            attr: {\r\n                x: 0,\r\n                y: 0,\r\n                a: width / 2,\r\n                b: height / 2,\r\n                stroke: '#ffce8b',\r\n                fill: '#fef7e7'\r\n            }\r\n        });\r\n\r\n        group.add('text', {\r\n            attr: {\r\n                label: config.name,\r\n                x: -txtWidth / 2,\r\n                y: txtHeight / 2,\r\n                fill: '#666666'\r\n            }\r\n        });\r\n\r\n        return result;\r\n    },\r\n    getAnchorPoints() {\r\n        return [\r\n            [0.5, 0]\r\n        ]\r\n    },\r\n    getAnchorPointTypes() {\r\n        return [\r\n            {\r\n                type: _Constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].anchorType.in,\r\n                count: 1\r\n            }\r\n        ];\r\n    }\r\n});\n\n//# sourceURL=webpack:///./src/nodes/end.js?");

/***/ }),

/***/ "./src/nodes/index.js":
/*!****************************!*\
  !*** ./src/nodes/index.js ***!
  \****************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _produce__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./produce */ \"./src/nodes/produce.js\");\n/* harmony import */ var _judge__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./judge */ \"./src/nodes/judge.js\");\n/* harmony import */ var _start__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./start */ \"./src/nodes/start.js\");\n/* harmony import */ var _end__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./end */ \"./src/nodes/end.js\");\n/*\r\n * Created on Mon Apr 30 2018\r\n *\r\n * Copyright (c) 2018 Your Company\r\n */\r\n\r\n\r\n\r\n\n\n//# sourceURL=webpack:///./src/nodes/index.js?");

/***/ }),

/***/ "./src/nodes/judge.js":
/*!****************************!*\
  !*** ./src/nodes/judge.js ***!
  \****************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Constants */ \"./src/Constants.js\");\n/* harmony import */ var _LzFlow__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../LzFlow */ \"./src/LzFlow.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils */ \"./src/utils/index.js\");\n/*\r\n * Created on Mon Apr 30 2018\r\n *\r\n * Copyright (c) 2018 Your Company\r\n */\r\n\r\n\r\n\r\n\r\nconst getdiamondPoints = _utils__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getdiamondPoints;\r\n\r\nconst name = `${_Constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prefix}Judge`;\r\n_LzFlow__WEBPACK_IMPORTED_MODULE_1__[\"default\"].registerNode(name, {\r\n    draw(config, group) {\r\n        let width = _utils__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getTextWidth(config.name);\r\n        const txtWidth = width;\r\n        let height = config.fontSize || 12;\r\n        const txtHeight = height;\r\n        const padding = 15;\r\n        width += padding * 2;\r\n        height += padding * 2;\r\n\r\n        const points = getdiamondPoints(0, 0, width, height);\r\n        const result = group.add('polygon', {\r\n            attr: {\r\n                points,\r\n                stroke: '#81e4de',\r\n                fill: '#e7f8ff'\r\n            }\r\n        });\r\n\r\n        group.add('text', {\r\n            attr: {\r\n                label: config.name,\r\n                x: -txtWidth / 2,\r\n                y: txtHeight / 2,\r\n                fill: '#6a6a6a'\r\n            }\r\n        });\r\n\r\n        return result;\r\n    },\r\n    getAnchorPoints() {\r\n        return [\r\n            [0.5, 0],\r\n            [1, 0.5],\r\n            [0.5, 1],\r\n        ]\r\n    },\r\n    getAnchorPointTypes() {\r\n        return [\r\n            {\r\n                type: _Constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].anchorType.in,\r\n                count: 1\r\n            },\r\n            {\r\n                type: _Constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].anchorType.out,\r\n                count: 1\r\n            },\r\n            {\r\n                type: _Constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].anchorType.out,\r\n                count: 1\r\n            },\r\n        ];\r\n    }\r\n});\n\n//# sourceURL=webpack:///./src/nodes/judge.js?");

/***/ }),

/***/ "./src/nodes/produce.js":
/*!******************************!*\
  !*** ./src/nodes/produce.js ***!
  \******************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Constants */ \"./src/Constants.js\");\n/* harmony import */ var _LzFlow__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../LzFlow */ \"./src/LzFlow.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils */ \"./src/utils/index.js\");\n/*\r\n * Created on Mon Apr 30 2018\r\n *\r\n * Copyright (c) 2018 Your Company\r\n */\r\n\r\n\r\n\r\n\r\n\r\nconst name = `${_Constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prefix}Produce`;\r\n_LzFlow__WEBPACK_IMPORTED_MODULE_1__[\"default\"].registerNode(name, {\r\n    draw(config, group) {\r\n        let width = _utils__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getTextWidth(config.name);\r\n        const txtWidth = width;\r\n        let height = config.fontSize || 12;\r\n        const txtHeight = height;\r\n        const padding = 8;\r\n        width += padding * 2;\r\n        height += padding * 2;\r\n\r\n        const result = group.add('rect', {\r\n            attr: {\r\n                x: -width / 2,\r\n                y: -height / 2,\r\n                width,\r\n                height,\r\n                stroke: '#81e4de',\r\n                fill: '#e7f8ff'\r\n            }\r\n        });\r\n\r\n        group.add('text', {\r\n            attr: {\r\n                label: config.name,\r\n                x: -txtWidth / 2,\r\n                y: txtHeight / 2,\r\n                fill: '#6a6a6a'\r\n            }\r\n        });\r\n\r\n        return result;\r\n    },\r\n    getAnchorPoints() {\r\n        return [\r\n            [0.5, 0],\r\n            [0.5, 1],\r\n        ]\r\n    },\r\n    getAnchorPointTypes() {\r\n        return [\r\n            {\r\n                type: _Constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].anchorType.in,\r\n                count: 1\r\n            },\r\n            {\r\n                type: _Constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].anchorType.out,\r\n                count: 1\r\n            },\r\n        ];\r\n    }\r\n}); \n\n//# sourceURL=webpack:///./src/nodes/produce.js?");

/***/ }),

/***/ "./src/nodes/start.js":
/*!****************************!*\
  !*** ./src/nodes/start.js ***!
  \****************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _Constants__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../Constants */ \"./src/Constants.js\");\n/* harmony import */ var _LzFlow__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../LzFlow */ \"./src/LzFlow.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../utils */ \"./src/utils/index.js\");\n\r\n\r\n\r\n\r\nconst getdiamondPoints = _utils__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getdiamondPoints;\r\n\r\nconst name = `${_Constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].prefix}Start`;\r\n_LzFlow__WEBPACK_IMPORTED_MODULE_1__[\"default\"].registerNode(name, {\r\n    draw(config, group) {\r\n        let width = _utils__WEBPACK_IMPORTED_MODULE_2__[\"default\"].getTextWidth(config.name);\r\n        const txtWidth = width;\r\n        let height = config.fontSize || 12;\r\n        const txtHeight = height;\r\n        const paddingWidth = 10;\r\n        const paddingHeight = 8;\r\n        width += paddingWidth * 2;\r\n        height += paddingHeight * 2;\r\n\r\n        const points = getdiamondPoints(0, 0, width, height);\r\n        const result = group.add('ellipse', {\r\n            attr: {\r\n                x: 0,\r\n                y: 0,\r\n                a: width / 2,\r\n                b: height / 2,\r\n                stroke: '#ffce8b',\r\n                fill: '#fef7e7'\r\n            }\r\n        });\r\n\r\n        group.add('text', {\r\n            attr: {\r\n                label: config.name,\r\n                x: -txtWidth / 2,\r\n                y: txtHeight / 2,\r\n                fill: '#666666'\r\n            }\r\n        });\r\n\r\n        return result;\r\n    },\r\n    getAnchorPoints() {\r\n        return [\r\n            [0.5, 1]\r\n        ]\r\n    },\r\n    getAnchorPointTypes() {\r\n        return [\r\n            {\r\n                type: _Constants__WEBPACK_IMPORTED_MODULE_0__[\"default\"].anchorType.out,\r\n                count: 1\r\n            }\r\n        ];\r\n    }\r\n});\n\n//# sourceURL=webpack:///./src/nodes/start.js?");

/***/ }),

/***/ "./src/utils/dom.js":
/*!**************************!*\
  !*** ./src/utils/dom.js ***!
  \**************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nfunction getElementViewLeft(element) {\r\n    if (element.getBoundingClientRect) {\r\n        return element.getBoundingClientRect().left;\r\n    }\r\n\r\n    var actualLeft = element.offsetLeft;\r\n    var current = element.offsetParent;\r\n\r\n    while (current !== null) {\r\n        actualLeft += current.offsetLeft;\r\n        current = current.offsetParent;\r\n    }\r\n\r\n    if (document.compatMode == \"BackCompat\") {\r\n        var elementScrollLeft = document.body.scrollLeft;\r\n    } else {\r\n        var elementScrollLeft = document.documentElement.scrollLeft;\r\n    }\r\n\r\n    return actualLeft - elementScrollLeft;\r\n}\r\n\r\nfunction getElementViewTop(element) {\r\n    if (element.getBoundingClientRect) {\r\n        return element.getBoundingClientRect().top;\r\n    }\r\n\r\n    var actualTop = element.offsetTop;\r\n    var current = element.offsetParent;\r\n\r\n    while (current !== null) {\r\n        actualTop += current.offsetTop;\r\n        current = current.offsetParent;\r\n    }\r\n\r\n    if (document.compatMode == \"BackCompat\") {\r\n        var elementScrollTop = document.body.scrollTop;\r\n    } else {\r\n        var elementScrollTop = document.documentElement.scrollTop;\r\n    }\r\n\r\n    return actualTop - elementScrollTop;\r\n}\r\n\r\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\r\n    getElementViewLeft,\r\n    getElementViewTop\r\n});\n\n//# sourceURL=webpack:///./src/utils/dom.js?");

/***/ }),

/***/ "./src/utils/index.js":
/*!****************************!*\
  !*** ./src/utils/index.js ***!
  \****************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\nconst canvas = document.createElement('canvas');\r\nconst ctx = canvas.getContext('2d');\r\n\r\n/**\r\n * 获取文本宽带\r\n * @param {String} text \r\n * @param {String} style \r\n */\r\nfunction getTextWidth(text, style = '12px') {\r\n    return ctx.measureText(text, style).width;\r\n}\r\n\r\n/**\r\n * 从矩形表示中，获取四个顶点坐标\r\n * @param {Number} x \r\n * @param {Number} y \r\n * @param {Number} w \r\n * @param {Number} h \r\n */\r\nfunction getPointsFromRect(x, y, w, h) {\r\n    return [\r\n        [x, y],\r\n        [x + w, y],\r\n        [x + w, y + h],\r\n        [x, y + h]\r\n    ]\r\n}\r\n\r\n/**\r\n * 为顶点坐标结合添加偏移\r\n * @param {Array} points \r\n * @param {Object} offset \r\n */\r\nfunction addOffsetToPolygon(points, offset) {\r\n    return points.map(it => {\r\n        it[0] += offset.x;\r\n        it[1] += offset.y;\r\n        return it;\r\n    });\r\n}\r\n\r\n/**\r\n * 从矩形表示中，获取四个顶点坐标\r\n * @param {Number} x \r\n * @param {Number} y \r\n * @param {Number} w \r\n * @param {Number} h \r\n */\r\nfunction getdiamondPoints(x, y, w, h) {\r\n    return [\r\n        [x, y - h / 2],\r\n        [x + w / 2, y],\r\n        [x, y + h / 2],\r\n        [x - w / 2, y]\r\n    ];\r\n}\r\n\r\n/**\r\n * 获取点在矩形的那条边\r\n * @param {*} point \r\n * @param {*} rect \r\n */\r\nfunction getPointInRectSide(point, rect) {\r\n    const x = point.x;\r\n    const y = point.y;\r\n    const w = rect.w;\r\n    const h = rect.h;\r\n    if (x > rect.x + w) {\r\n        return false;\r\n    }\r\n    if (x < rect.x) {\r\n        return false;\r\n    }\r\n    if (y > rect.y + h) {\r\n        return false;\r\n    }\r\n    if (y < rect.y) {\r\n        return false;\r\n    }\r\n    if (x > rect.x && x < rect.x + w) {\r\n        if (y === rect.y) {\r\n            return 0;\r\n        } else if (y === rect.y + h) {\r\n            return 2;\r\n        }\r\n    }\r\n    if (y > rect.y && y < rect.y + h) {\r\n        if (x === rect.x) {\r\n            return 3;\r\n        } else if (x === rect.x + w) {\r\n            return 1;\r\n        }\r\n    }\r\n    return false;\r\n}\r\n\r\nfunction inCircle(arrPoint, circleCenter, radius) {\r\n    const r = Math.pow(Math.abs(arrPoint[0] - circleCenter.x), 2) + Math.pow(Math.abs(arrPoint[1] - circleCenter.y), 2);\r\n    if (r <= radius * radius) {\r\n        return true;\r\n    }\r\n\r\n    return false;\r\n}\r\n\r\nfunction isUndefined (obj) {\r\n    return typeof obj === 'undefined';\r\n}\r\n\r\nfunction pointToArray(point) {\r\n    return [point.x, point.y];\r\n}\r\n\r\nfunction arrayToPoint(arrPoint) {\r\n    return {x: arrPoint[0], y: arrPoint[1]};\r\n}\r\n\r\n/**\r\n * \r\n * @param {*} arrPoint \r\n */\r\nfunction arrayPointsToPoint(arrPoint) {\r\n    const result = [];\r\n    arrPoint.forEach(it => {\r\n        result.push(arrayToPoint(it));\r\n    });\r\n    return result;\r\n}\r\n\r\n/**\r\n * 随机字符串生成器\r\n * @param {*} len \r\n */\r\nfunction randomString(len = 6) {\r\n    const domain = '1234567890qwertyuiopasdfghjklzxcvbnm';\r\n    const domainLen = domain.length;\r\n    let result = '';\r\n    for (let i = 0; i < len; ++i) {\r\n        const idx = Math.floor(Math.random() * domainLen);\r\n        result += domain[idx];\r\n    }\r\n    return result;\r\n}\r\n\r\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\r\n    getTextWidth,\r\n    getPointsFromRect,\r\n    addOffsetToPolygon,\r\n    getdiamondPoints,\r\n    getPointInRectSide,\r\n    inCircle,\r\n    pointToArray,\r\n    randomString,\r\n    arrayToPoint,\r\n    arrayPointsToPoint\r\n});\n\n//# sourceURL=webpack:///./src/utils/index.js?");

/***/ }),

/***/ "./src/utils/line.js":
/*!***************************!*\
  !*** ./src/utils/line.js ***!
  \***************************/
/*! exports provided: getLinkCtrlPoints, getArrowPoints */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getLinkCtrlPoints\", function() { return getLinkCtrlPoints; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getArrowPoints\", function() { return getArrowPoints; });\n/* harmony import */ var _index__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./index */ \"./src/utils/index.js\");\n/* harmony import */ var point_in_polygon__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! point-in-polygon */ \"./node_modules/_point-in-polygon@1.0.1@point-in-polygon/index.js\");\n/* harmony import */ var point_in_polygon__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(point_in_polygon__WEBPACK_IMPORTED_MODULE_1__);\n\r\n\r\n\r\nfunction getLinkCtrlPoints(startPoint, endPoint, startSize, endSize) {\r\n    const extra = 10;\r\n    const start = {\r\n        x: startPoint.x,\r\n        y: startPoint.y\r\n    };\r\n    const end = {\r\n        x: endPoint.x,\r\n        y: endPoint.y\r\n    };\r\n    // 测试点x\r\n    const testX = (end.x > start.x) ? start.x + 1 : start - 1;\r\n    // 测试点y\r\n    const testY = (end.y - start.y) / (end.x - start.x) * testX;\r\n    // 垂直连线\r\n    if (start.x === end.x) {\r\n        return [[startPoint.x, startPoint.y], [endPoint.x, endPoint.y]];\r\n    }\r\n    const startSide = _index__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getPointInRectSide(startPoint, startSize);\r\n    const endSide = _index__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getPointInRectSide(endPoint, endSize);\r\n\r\n    const result = [[startPoint.x, startPoint.y]];\r\n    if (startSide === 1 && endSide === 0) {\r\n        if (end.x > start.x) {\r\n            let lastPoint = [end.x, start.y];\r\n            if (point_in_polygon__WEBPACK_IMPORTED_MODULE_1___default()(lastPoint, _index__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getPointsFromRect(endSize.x, endSize.y, endSize.w, endSize.h))) {\r\n                lastPoint = [endSize.x - extra, start.y];\r\n                result.push([lastPoint[0], lastPoint[1]]);\r\n                if (end.y > start.y) {\r\n                    lastPoint = [lastPoint[0], end.y + extra];\r\n                    result.push([lastPoint[0], lastPoint[1]]);\r\n                    \r\n                    lastPoint = [end.x, lastPoint[1]];\r\n                    result.push([lastPoint[0], lastPoint[1]]);\r\n                } else {\r\n                    lastPoint = [lastPoint[0], end.y - extra];\r\n                    result.push([lastPoint[0], lastPoint[1]]);\r\n                    \r\n                    lastPoint = [end.x, lastPoint[1]];\r\n                    result.push([lastPoint[0], lastPoint[1]]);\r\n                }\r\n            } else {\r\n                const nextPoint = [lastPoint[0], end.y + 1];\r\n                if (point_in_polygon__WEBPACK_IMPORTED_MODULE_1___default()(nextPoint, _index__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getPointsFromRect(endSize.x, endSize.y, endSize.w, endSize.h))) {\r\n                    lastPoint = [endSize.x - extra, lastPoint[1]];\r\n                    result.push([lastPoint[0], lastPoint[1]]);\r\n                    lastPoint = [lastPoint[0], end.y - extra];\r\n                    result.push([lastPoint[0], lastPoint[1]]);\r\n                    lastPoint = [end.x, lastPoint[1]];\r\n                    result.push([lastPoint[0], lastPoint[1]]);\r\n                } else {\r\n                    result.push([lastPoint[0], lastPoint[1]]);\r\n                }\r\n            }\r\n        } else {\r\n            let lastPoint = [start.x + extra, start.y];\r\n            result.push([lastPoint[0], lastPoint[1]]);\r\n            if (end.y > start.y) {\r\n                lastPoint = [lastPoint[0], end.y - extra];\r\n                result.push([lastPoint[0], lastPoint[1]]);\r\n                result.push([end.x, end.y - extra]);\r\n            } else {\r\n                lastPoint = [lastPoint[0], end.y - extra];\r\n                result.push([lastPoint[0], lastPoint[1]]);\r\n                result.push([end.x, end.y - extra]);\r\n            }\r\n            result.push([end.x, result[result.length - 1][1]]);\r\n        }\r\n    } else if (startSide === 2 && endSide === 0) {\r\n        if (end.y > start.y) {\r\n            let lastPoint = [start.x, start.y + extra];\r\n            result.push([lastPoint[0], lastPoint[1]]);\r\n            result.push([end.x, lastPoint[1]]);\r\n        } else {\r\n            let lastPoint = [start.x, start.y + extra];\r\n            result.push([lastPoint[0], lastPoint[1]]);\r\n            lastPoint = [end.x, lastPoint[1]];\r\n            if (point_in_polygon__WEBPACK_IMPORTED_MODULE_1___default()(lastPoint, _index__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getPointsFromRect(endSize.x, endSize.y, endSize.w, endSize.h))) {\r\n                lastPoint = [endSize.x - extra, lastPoint[1]];\r\n                result.push([lastPoint[0], lastPoint[1]]);\r\n                result.push([lastPoint[0], end.y - extra]);\r\n                result.push([end.x, end.y - extra]);\r\n            } else {\r\n                const nextPoint = [lastPoint[0], end.y + 1];\r\n                if (point_in_polygon__WEBPACK_IMPORTED_MODULE_1___default()(nextPoint, _index__WEBPACK_IMPORTED_MODULE_0__[\"default\"].getPointsFromRect(endSize.x, endSize.y, endSize.w, endSize.h))) {\r\n                    lastPoint = [endSize.x - extra, lastPoint[1]];\r\n                    result.push([lastPoint[0], lastPoint[1]]);\r\n                    lastPoint = [lastPoint[0], end.y - extra];\r\n                    result.push([lastPoint[0], lastPoint[1]]);\r\n                    lastPoint = [end.x, lastPoint[1]];\r\n                    result.push([lastPoint[0], lastPoint[1]]);\r\n                } else {\r\n                    result.push([lastPoint[0], lastPoint[1]]);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    result.push([endPoint.x, endPoint.y]);\r\n    return result;\r\n}\r\n\r\n/**\r\n * 获取放向 0上 1右 2下 3左\r\n * @param {*} start \r\n * @param {*} end \r\n */\r\nfunction getDirection(start, end) {\r\n    if (start.x === end.x) {\r\n        if (start.y > end.y) {\r\n            return 0;\r\n        } else {\r\n            return 2;\r\n        }\r\n    } else if (start.y === start.y) {\r\n        if (start.x > end.x) {\r\n            return 1;\r\n        } else {\r\n            return 3;\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * 获取连续箭头表示坐标\r\n * @param {*} points \r\n */\r\nfunction getArrowPoints(points) {\r\n    const extra = 6;\r\n    const result = [];\r\n    if (points.length > 1) {\r\n        const end = points[points.length -1];\r\n        const start = points[points.length - 2];\r\n        const direction = getDirection(start, end);\r\n        switch(direction) {\r\n            case 0: \r\n                result.push({\r\n                    x: end.x - extra,\r\n                    y: end.y + extra\r\n                });\r\n                result.push({\r\n                    x: end.x,\r\n                    y: end.y\r\n                });\r\n                result.push({\r\n                    x: end.x + extra,\r\n                    y: end.y + extra\r\n                });\r\n            break;\r\n            case 1: \r\n                result.push({\r\n                    x: end.x - extra,\r\n                    y: end.y - extra\r\n                });\r\n                result.push({\r\n                    x: end.x,\r\n                    y: end.y\r\n                });\r\n                result.push({\r\n                    x: end.x - extra,\r\n                    y: end.y + extra\r\n                });\r\n            break;\r\n            case 2: \r\n                result.push({\r\n                    x: end.x - extra,\r\n                    y: end.y - extra\r\n                });\r\n                result.push({\r\n                    x: end.x,\r\n                    y: end.y\r\n                });\r\n                result.push({\r\n                    x: end.x + extra,\r\n                    y: end.y - extra\r\n                });\r\n            break;\r\n            case 3: \r\n                result.push({\r\n                    x: end.x + extra,\r\n                    y: end.y - extra\r\n                });\r\n                result.push({\r\n                    x: end.x,\r\n                    y: end.y\r\n                });\r\n                result.push({\r\n                    x: end.x + extra,\r\n                    y: end.y + extra\r\n                });\r\n            break;\r\n        }\r\n    }\r\n    return result;\r\n}\n\n//# sourceURL=webpack:///./src/utils/line.js?");

/***/ }),

/***/ 0:
/*!****************************!*\
  !*** multi ./src/index.js ***!
  \****************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("module.exports = __webpack_require__(/*! ./src/index.js */\"./src/index.js\");\n\n\n//# sourceURL=webpack:///multi_./src/index.js?");

/***/ })

/******/ });